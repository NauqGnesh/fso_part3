{"version":3,"sources":["services.js","components/Page.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Header","text","Button","handler","onClick","Input","value","onChange","Entry","props","obj","name","number","deleteHandler","Form","newName","inputHandler","newNumber","buttonHandler","Notification","message","type","Page","errorMessage","messageType","filter","persons","x","RegExp","test","map","App","useState","setPersons","setNewName","setNewNumber","setFilter","error","setError","success","setSuccess","useEffect","console","log","personServices","e","target","preventDefault","filteredPersons","length","catch","body","createNewEntry","p","window","confirm","person","flag","err","finally","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c3fad466.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl);\n\treturn request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n\tconst request = axios.post(baseUrl, newObject);\n\treturn request.then((response) => {\n\t\treturn response.data;\n\t});\n};\n\nconst update = (id, newObject) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject);\n\treturn request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`);\n\treturn request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, remove };\n","import React from \"react\";\nimport personServices from \"../services\";\n\nconst Header = ({ text }) => <h2>{text}</h2>;\nconst Button = ({ text, handler }) => {\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={handler}>{text}</button>\n\t\t</div>\n\t);\n};\n\nconst Input = ({ text, value, handler }) => {\n\treturn (\n\t\t<div>\n\t\t\t{text}: <input value={value} onChange={handler} />\n\t\t</div>\n\t);\n};\n\nconst Entry = (props) => {\n\treturn (\n\t\t<div>\n\t\t\t{props.obj.name} {props.obj.number}\n\t\t\t<Button text=\"delete\" handler={props.deleteHandler(props.obj)} />\n\t\t</div>\n\t);\n};\n\nconst Form = (props) => {\n\treturn (\n\t\t<form>\n\t\t\t<Input\n\t\t\t\ttext=\"name\"\n\t\t\t\tvalue={props.newName}\n\t\t\t\thandler={props.inputHandler(\"name\")}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\ttext=\"number\"\n\t\t\t\tvalue={props.newNumber}\n\t\t\t\thandler={props.inputHandler(\"number\")}\n\t\t\t/>\n\t\t\t<Button text=\"add\" handler={props.buttonHandler} />\n\t\t</form>\n\t);\n};\n\nconst Notification = ({ message, type }) => {\n\tif (message === null) {\n\t\treturn null;\n\t}\n\n\treturn type(message);\n};\n\nconst Page = (props) => {\n\treturn (\n\t\t<div>\n\t\t\t<Header text=\"Phonebook\" />\n\t\t\t<Notification\n\t\t\t\tmessage={props.errorMessage}\n\t\t\t\ttype={props.messageType}\n\t\t\t/>\n\n\t\t\t<Input\n\t\t\t\ttext=\"filter shown with\"\n\t\t\t\tvalue={props.filter}\n\t\t\t\thandler={props.inputHandler(\"filter\")}\n\t\t\t/>\n\t\t\t<Header text=\"add a new\" />\n\t\t\t<Form\n\t\t\t\tnewName={props.newName}\n\t\t\t\tinputHandler={props.inputHandler}\n\t\t\t\tbuttonHandler={props.buttonHandler}\n\t\t\t/>\n\t\t\t<h2>Numbers</h2>\n\t\t\t{props.persons\n\t\t\t\t.filter((x) => new RegExp(props.filter, \"i\").test(x.name))\n\t\t\t\t.map((x) => (\n\t\t\t\t\t<Entry\n\t\t\t\t\t\tkey={x.name}\n\t\t\t\t\t\tobj={x}\n\t\t\t\t\t\tdeleteHandler={props.deleteHandler}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default Page;\n","import React, { useState, useEffect } from \"react\";\nimport Page from \"./Page\";\nimport personServices from \"../services\";\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([]);\n\tconst [newName, setNewName] = useState(\"\");\n\tconst [newNumber, setNewNumber] = useState(\"\");\n\tconst [filter, setFilter] = useState(\"\");\n\tconst [error, setError] = useState(null);\n\tconst [success, setSuccess] = useState(false);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"effect\");\n\t\tpersonServices.getAll().then((response) => {\n\t\t\tconsole.log(\"promise fulfilled\");\n\t\t\tsetPersons(response);\n\t\t\tconsole.log(persons);\n\t\t});\n\t}, []);\n\n\tconst handleNewInput = (type) => {\n\t\tswitch (type) {\n\t\t\tcase \"name\":\n\t\t\t\treturn (e) => setNewName(e.target.value);\n\t\t\tcase \"number\":\n\t\t\t\treturn (e) => setNewNumber(e.target.value);\n\t\t\tcase \"filter\":\n\t\t\t\treturn (e) => setFilter(e.target.value);\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"invalid argument\");\n\t\t}\n\t};\n\n\tconst createNewEntry = () => {\n\t\tconst obj = { name: newName, number: newNumber };\n\t\tpersonServices\n\t\t\t.create(obj)\n\t\t\t.then((response) => {\n\t\t\t\tsetPersons([...persons, response]);\n\t\t\t\tsetError(`Added ${obj.name}`);\n\t\t\t\tsetSuccess(true);\n\t\t\t})\n\t\t\t.catch((body) => {\n\t\t\t\tconsole.log(body.response.data);\n\t\t\t\tsetError(`${body.response.data.error}`);\n\t\t\t\tsetSuccess(false);\n\t\t\t});\n\t};\n\n\tconst resetState = () => {\n\t\tsetNewName(\"\");\n\t\tsetNewNumber(\"\");\n\t};\n\n\tconst handleNewPerson = (e) => {\n\t\te.preventDefault();\n\t\tconst filteredPersons = persons.filter((obj) => obj.name === newName);\n\t\tif (filteredPersons.length === 0) {\n\t\t\tcreateNewEntry();\n\t\t} else {\n\t\t\tconst p = filteredPersons[0];\n\t\t\tif (\n\t\t\t\twindow.confirm(\n\t\t\t\t\t`${newName} is already added to phonebook, replace the old number with a new one?`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tpersonServices\n\t\t\t\t\t.update(p.id, { ...p, number: newNumber })\n\t\t\t\t\t.then((response) =>\n\t\t\t\t\t\tsetPersons(\n\t\t\t\t\t\t\tpersons.map((person) => (person.id !== p.id ? person : response))\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tsetError(`Updated contact details of ${p.name}`);\n\t\t\tsetSuccess(true);\n\t\t}\n\t\tresetState();\n\t};\n\n\tconst deleteHandler = (obj) => {\n\t\treturn () => {\n\t\t\tif (window.confirm(`Delete ${obj.name}`)) {\n\t\t\t\tlet flag = true;\n\t\t\t\tconsole.log(obj);\n\t\t\t\tpersonServices\n\t\t\t\t\t.remove(obj.id)\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tsetError(\"Person was already deleted\");\n\t\t\t\t\t\tsetSuccess(false);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\tsetPersons(persons.filter((p) => p.id !== obj.id));\n\t\t\t\t\t\t\tsetError(`Deleted ${obj.name}`);\n\t\t\t\t\t\t\tsetSuccess(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tconst messageType = (message) => {\n\t\tconsole.log(success);\n\t\tif (success) {\n\t\t\treturn <div className={\"error success\"}>{message}</div>;\n\t\t}\n\n\t\treturn <div className=\"error\">{message}</div>;\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Page\n\t\t\t\tnewName={newName}\n\t\t\t\tinputHandler={handleNewInput}\n\t\t\t\tbuttonHandler={handleNewPerson}\n\t\t\t\tdeleteHandler={deleteHandler}\n\t\t\t\tpersons={persons}\n\t\t\t\terrorMessage={error}\n\t\t\t\tmessageType={messageType}\n\t\t\t\tfilter={filter}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}